{"name": "crunchyroll_ef-open_evaluate_service_changes", "language": "py", "prompt": "def evaluate_service_changes(services, envs, repo_root, func):\n    \"\"\"\n    Given a service of services, and a set of environments, apply the diff\n    function to evaluate the differences between the target environments\n    and the set templates.\n\n    Sub-services (names with '.' in them) are skipped.\n    \"\"\"", "tests": "", "completions": ["\n\n    # Read the template files\n    # TODO: Move to a generator\n    templates = {}\n    for service in services:\n        if '.' in service:\n            continue\n        service_template = os.path.join(repo_root, service, 'templates')\n        if os.path.exists(service_template):\n            for template_file in os.listdir(service_template):\n                template_path = os.path.join(service_template, template_file)\n                with open(template_path) as template:\n                    templates[template_file] = template.read()\n\n    # Apply the diff function\n    for env in envs:\n        if '.' in env:\n            continue\n        env_template = os.path.join(repo_root, env, 'templates')\n        if os.path.exists(env_template):\n            diff_func = partial(func,\n                source=templates,\n                target=env_template)\n            diff_func()\n"], "stop_tokens": ["\ndef", "\n#", "\nif", "\nclass"], "tokens": [], "softmax": []}