{"name": "sergei-maertens_django-systemjs_find_sourcemap_comment", "language": "py", "prompt": "def find_sourcemap_comment(filepath, block_size=100):\n    \"\"\"\n    Seeks and removes the sourcemap comment. If found, the sourcemap line is\n    returned.\n\n    Bundled output files can have massive file of lines, and the sourceMap\n    comment is always at the end. So, to extract it efficiently, we read out the\n    lines of the number starting from the end. We look back at most 2 lines.\n\n    :param:filepath: path to output bundle file containing the sourcemap comment\n    :param:blocksize: integer saying how many bytes to read at once\n    :return:string with the last comment or None\n    \"\"\"", "tests": "", "completions": ["\n\n    with open(filepath, 'r') as file:\n        lines = file.readlines()\n        if not lines:\n            return None\n\n        for i in range(0, min(2, len(lines))):\n            # This will return the last 100 bytes, which is a safe bet\n            # for a comment.\n            comment = lines[-i - 1]\n            match = re.search(r'//# sourceMappingURL=.*', comment)\n            if match:\n                return match.group()\n\n    return None\n"], "stop_tokens": ["\ndef", "\n#", "\nif", "\nclass"], "tokens": [], "softmax": []}